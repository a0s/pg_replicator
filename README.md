pg_replicator
=============

Хелперы для логической репликации между Postgres 10/11/12/Amazon RDS 

Обозначения
-----------

Предполгаем что базы данных не меняют свои имена, а только переезжают с хоста на хост, из инстанса pg в другой инстанс.

Обозначения:

- `src` - источник, откуда производится репликация
- `dest` - приемник, куда происзводится репликация

Параметры:

- `--src-databases` - список баз для репликации через запятую
- `--src-host` - хост источника
- `--src-port` - порт источника
- `--src-user` - юзер источника, должен уметь `CREATE PUBLICATION`
- `--src-password` - пароль пользователя
- `--dest-host` - хост приемника
- `--dest-port` - порт приемника
- `--dest-user` - юзер приемника, должен уметь `CREATE DATABASE`, `CREATE SUBSCRIPTION`
- `--dest-password` - пароль пользователя

Все параметры одинаковы для всех команд


resync
------

**Удаляет** все базы на приемнике, указанные в `--src-databases`. 
С каждой базы источника снимается дамп схемы, затем по ней разворачивается пустая база на приемнике с таким же именем и схемой.

start
-----

В каждой базе источника создаются публикация. В каждой базе приемника создаются подписки.


`max_replication_slots` на источнике должно быть больше или равно количеству баз, указанных в `--src-databases`!

status
------

Оботражает состояние всех подписок на приемнике. Можно запустить под `watch`.

stop
----

На приемнике удаляются все подписки. На источнике удаляются все публикации.

sequences
---------

Переносит значения всех sequences из источника в приемник.

